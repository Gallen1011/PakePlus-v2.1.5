{"message":"Not Found","documentation_url":"https://docs.github.com/rest/git/refs#get-all-references-in-a-namespace","status":"404","name":"eaaedfdedfd","url":"index.html (等资源+1)","showName":"辅导员谈心谈话管理系统","appid":"com.eaaedfdedfd.pakeplus","icon":"","iconPath":"C:\\Users\\gjlpl\\AppData\\Roaming\\com.pakeplus.pacbao\\wjnetbysybc.png","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.1","preview":"desktop","platform":["1-1","1-2","2-1","2-2","3-1","3-2"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"// very important, if you don't know what it is, don't touch it\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\n\n// 修改后的版本：支持文件下载功能\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector('head base[target=\"_blank\"]')\n    \n    console.log('origin', origin, isBaseTargetBlank)\n    \n    // 检查是否是下载链接（有download属性）\n    const isDownloadLink = origin && origin.hasAttribute('download')\n    \n    // 检查是否是Blob URL（文件下载）\n    const isBlobUrl = origin && origin.href && origin.href.startsWith('blob:')\n    \n    // 检查是否是数据URL（base64编码的文件）\n    const isDataUrl = origin && origin.href && origin.href.startsWith('data:')\n    \n    // 如果是下载链接、Blob URL或数据URL，不拦截，允许正常下载\n    if (isDownloadLink || isBlobUrl || isDataUrl) {\n        console.log('允许下载链接:', origin.href)\n        return // 不阻止默认行为，允许文件下载\n    }\n    \n    // 如果不是下载链接，按原逻辑处理\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\n// 重写window.open，但排除下载相关的打开\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    \n    // 如果是Blob URL或数据URL，可能是下载，尝试创建a标签下载\n    if (url && (url.startsWith('blob:') || url.startsWith('data:'))) {\n        console.log('检测到文件下载，尝试通过a标签下载')\n        \n        try {\n            const a = document.createElement('a')\n            a.href = url\n            a.download = 'file' // 可以设置默认文件名\n            a.style.display = 'none'\n            document.body.appendChild(a)\n            a.click()\n            document.body.removeChild(a)\n            return null\n        } catch (error) {\n            console.error('下载失败:', error)\n        }\n    }\n    \n    // 否则按原逻辑跳转\n    location.href = url\n    return null\n}\n\n// 添加全局文件下载助手函数\nwindow.downloadFile = function(filename, content, type = 'application/octet-stream') {\n    try {\n        // 创建Blob\n        const blob = new Blob([content], { type: type })\n        const url = URL.createObjectURL(blob)\n        \n        // 创建下载链接\n        const a = document.createElement('a')\n        a.href = url\n        a.download = filename\n        a.style.display = 'none'\n        \n        // 添加到文档并点击\n        document.body.appendChild(a)\n        a.click()\n        \n        // 清理\n        setTimeout(() => {\n            document.body.removeChild(a)\n            URL.revokeObjectURL(url)\n        }, 100)\n        \n        console.log('文件下载已触发:', filename)\n        return true\n    } catch (error) {\n        console.error('下载文件失败:', error)\n        return false\n    }\n}\n\n// 添加Excel导出助手\nwindow.exportExcel = function(data, filename) {\n    try {\n        // 检查xlsx库是否可用\n        if (typeof XLSX === 'undefined') {\n            console.error('XLSX库未加载')\n            return false\n        }\n        \n        // 创建工作表\n        const ws = XLSX.utils.json_to_sheet(data)\n        const wb = XLSX.utils.book_new()\n        XLSX.utils.book_append_sheet(wb, ws, '数据')\n        \n        // 生成Excel文件\n        const wbout = XLSX.write(wb, { bookType: 'xlsx', type: 'array' })\n        \n        // 下载文件\n        return window.downloadFile(filename, wbout, \n            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet')\n    } catch (error) {\n        console.error('导出Excel失败:', error)\n        return false\n    }\n}\n\n// 监听所有a标签的创建，为下载链接添加download属性\nconst observer = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n        mutation.addedNodes.forEach((node) => {\n            if (node.nodeName === 'A' && node.href && \n                (node.href.startsWith('blob:') || node.href.startsWith('data:'))) {\n                if (!node.hasAttribute('download')) {\n                    node.setAttribute('download', '')\n                }\n            }\n        })\n    })\n})\n\n// 开始监听body下的所有子节点变化\nobserver.observe(document.body, {\n    childList: true,\n    subtree: true\n})\n\n// 添加事件监听器\ndocument.addEventListener('click', hookClick, { capture: true })\n\nconsole.log('Pakeplus脚本已加载，文件下载功能已启用')","isHtml":true,"htmlPath":"C:\\Users\\gjlpl\\Desktop\\TalkSys2","htmlFiles":[],"prefix":"","pcRepo":"PakePlus-v2.1.5","iosRepo":"PakePlus-iOS-v2.1.5","androidRepo":"PakePlus-Android-v2.1.5","more":{"windows":{"label":"eaaedfdedfd","title":"辅导员谈心谈话管理系统","url":"index.html (等资源+1)","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":960,"height":540,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"shadow":true,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false,"backgroundColor":null,"backgroundThrottling":null,"javascriptDisabled":false}},"phone":{"fullScreen":false,"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"eaaedfdedfd","showName":"辅导员谈心谈话管理系统","version":"0.0.1","webUrl":"index.html (等资源+1)","id":"com.eaaedfdedfd.pakeplus.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":true,"debug":false,"safeArea":"all"},"android":{"name":"eaaedfdedfd","showName":"辅导员谈心谈话管理系统","version":"0.0.1","webUrl":"index.html (等资源+1)","id":"com.eaaedfdedfd.pakeplus.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":true,"debug":false,"safeArea":"all"},"desktop":{"name":"eaaedfdedfd","showName":"辅导员谈心谈话管理系统","version":"0.0.1","id":"com.eaaedfdedfd.pakeplus.desktop","desc":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","webUrl":"index.html (等资源+1)","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"打包仅限个人使用，请勿传播或商业用途，否则后果自负","isHtml":true,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}